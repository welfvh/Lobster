#!/bin/bash
#===============================================================================
# Post-Checkout Hook: Auto-configure git hooks path
#
# Ensures all contributors automatically use the project's distributed hooks
# after checkout, without needing to run any setup commands.
#===============================================================================

# Only run for branch checkouts (not file checkouts)
# $3 is the checkout type flag: 1 = branch, 0 = file
if [ "$3" != "1" ]; then
    exit 0
fi

REPO_ROOT="$(git rev-parse --show-toplevel)"

# Configure hooksPath to point to the distributed hooks directory
CURRENT_HOOKS_PATH="$(git config --local core.hooksPath 2>/dev/null || true)"
if [ "$CURRENT_HOOKS_PATH" != ".githooks" ]; then
    git config --local core.hooksPath .githooks
    echo "[hooks] Configured core.hooksPath -> .githooks"
fi
